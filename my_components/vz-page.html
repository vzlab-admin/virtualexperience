<link rel="import" href="../bower_components/polymer/polymer.html" />
<link rel="import" href="info-bar.html">
<link rel="import" href="exit-button.html">
<link rel="import" href="hit-content.html">

<dom-module id="full-vr">
    <style>
        :host{
            display:none;
            opacity:0;
            position:absolute;
            width:100%;
            height:100%;
            top:0px;
            left:0px;
            background-color:pink;
            transition:opacity .5s ease-in-out;
        }
        
        :host.ativo{
            opacity:1;
        }
        
        #panorama{
            width:100%;
            height:100%;
            position:absolute;
            top:0px;
            left:0px;
            /*height:300px;*/
            min-height:100%;
        }
        
        
        hit-content{
            --my-background-image: var(--hit-logo, url(/assets/hitArea/logos/VWeVC.png));
        }

    </style>
    
   <template>
        <div id="panorama"></div>
        
        <hit-content id="hit">
            <div class="contentText">O motor <b>TSI</b> por seu lado mais potente: por todos.</div>
        </hit-content>
        
        <info-bar id="info">
            <content select=".infoBar" class="infoBar"></content>
        </info-bar>
        <exit-button  on-tap="hide"></exit-button>
   </template>
    
</dom-module>

<script>
    Polymer({
        is: "full-vr",
        
        properties: {
            vr:{
                type:Object,
                value:null
            },

            
            settings:{
                type:String,
                value:undefined,
            }
        },
        
        ready:function(){
            this.setVR(vrSettings[this.settings]);
            // this.style.display="none";
        },
        
        setVR:function(settings){
            // console.log(this.$.panorama)
            this.vr=pannellum.viewer(this.$.panorama, settings);
        },
        
        hide:function(){
            if(this.style.display=="block"){
                this.classList.remove("ativo");
                
                this.async(function(){
                    this.style.display="none";
                    this.$.info.classList.remove("ativo")
                },500)
            }
        },
        
        show:function(){
            if(this.classList.contains("ativo")==false){
                this.style.display="block";
                
                var renderer=this.vr.getRenderer();
                renderer.resize();
                this.vr.animate();
                
                this.classList.add("ativo");
            }
        }
    });       
</script>